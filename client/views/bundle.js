var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function s(t){return document.createElement(t)}function i(t){return document.createTextNode(t)}function f(){return i(" ")}function d(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t,e){(null!=e||t.value)&&(t.value=e)}let h;function y(t){h=t}function g(t){(function(){if(!h)throw new Error("Function called outside component initialization");return h})().$$.on_mount.push(t)}const $=[],b=[],v=[],x=[],k=Promise.resolve();let w=!1;function N(t){v.push(t)}let _=!1;const C=new Set;function E(){if(!_){_=!0;do{for(let t=0;t<$.length;t+=1){const e=$[t];y(e),S(e.$$)}for($.length=0;b.length;)b.pop()();for(let t=0;t<v.length;t+=1){const e=v[t];C.has(e)||(C.add(e),e())}v.length=0}while($.length);for(;x.length;)x.pop()();w=!1,_=!1,C.clear()}}function S(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(N)}}const j=new Set;function T(t,e){t&&t.i&&(j.delete(t),t.i(e))}function B(t,e,n,o){if(t&&t.o){if(j.has(t))return;j.add(t),(void 0).c.push(()=>{j.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function I(t,e){t.d(1),e.delete(t.key)}function M(t){t&&t.c()}function A(t,n,a){const{fragment:u,on_mount:c,on_destroy:l,after_update:s}=t.$$;u&&u.m(n,a),N(()=>{const n=c.map(e).filter(r);l?l.push(...n):o(n),t.$$.on_mount=[]}),s.forEach(N)}function J(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function O(t,e){-1===t.$$.dirty[0]&&($.push(t),w||(w=!0,k.then(E)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function P(e,r,a,u,c,s,i=[-1]){const f=h;y(e);const d=r.props||{},p=e.$$={fragment:null,ctx:null,props:s,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:n(),dirty:i};let m=!1;if(p.ctx=a?a(e,d,(t,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&c(p.ctx[t],p.ctx[t]=r)&&(p.bound[t]&&p.bound[t](r),m&&O(e,t)),n}):[],p.update(),m=!0,o(p.before_update),p.fragment=!!u&&u(p.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);p.fragment&&p.fragment.l(t),t.forEach(l)}else p.fragment&&p.fragment.c();r.intro&&T(e.$$.fragment),A(e,r.target,r.anchor),E()}y(f)}class q{$destroy(){J(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function L(t,e,n){const o=t.slice();return o[1]=e[n],o}function z(t,e){let n,o,r=e[1].name+"";return{key:t,first:null,c(){n=s("li"),o=i(r),this.first=n},m(t,e){c(t,n,e),u(n,o)},p(t,e){1&e&&r!==(r=t[1].name+"")&&function(t,e){e=""+e,t.data!==e&&(t.data=e)}(o,r)},d(t){t&&l(n)}}}function F(e){let n,o,r,a,i=[],d=new Map,m=e[0];const h=t=>t[1].id;for(let t=0;t<m.length;t+=1){let n=L(e,m,t),o=h(n);d.set(o,i[t]=z(o,n))}return{c(){n=s("div"),o=s("h2"),o.textContent="Joueurs:",r=f(),a=s("ul");for(let t=0;t<i.length;t+=1)i[t].c();p(n,"id","lobby")},m(t,e){c(t,n,e),u(n,o),u(n,r),u(n,a);for(let t=0;t<i.length;t+=1)i[t].m(a,null)},p(t,[e]){if(1&e){const n=t[0];i=function(t,e,n,o,r,a,u,c,l,s,i,f){let d=t.length,p=a.length,m=d;const h={};for(;m--;)h[t[m].key]=m;const y=[],g=new Map,$=new Map;for(m=p;m--;){const t=f(r,a,m),c=n(t);let l=u.get(c);l?o&&l.p(t,e):(l=s(c,t),l.c()),g.set(c,y[m]=l),c in h&&$.set(c,Math.abs(m-h[c]))}const b=new Set,v=new Set;function x(t){T(t,1),t.m(c,i,u.has(t.key)),u.set(t.key,t),i=t.first,p--}for(;d&&p;){const e=y[p-1],n=t[d-1],o=e.key,r=n.key;e===n?(i=e.first,d--,p--):g.has(r)?!u.has(o)||b.has(o)?x(e):v.has(r)?d--:$.get(o)>$.get(r)?(v.add(o),x(e)):(b.add(r),d--):(l(n,u),d--)}for(;d--;){const e=t[d];g.has(e.key)||l(e,u)}for(;p;)x(y[p-1]);return y}(i,e,h,1,t,n,d,a,I,z,null,L)}},i:t,o:t,d(t){t&&l(n);for(let t=0;t<i.length;t+=1)i[t].d()}}}function H(t,e,n){let{players:o=[]}=e;return t.$set=t=>{"players"in t&&n(0,o=t.players)},[o]}class R extends q{constructor(t){super(),P(this,t,H,F,a,{players:0})}}function D(e){let n,r,a,u=function(e){let n,r,a,u;return{c(){n=s("button"),n.textContent="Nouveau mot",r=f(),a=s("button"),a.textContent="Commencer"},m(t,e,l){c(t,n,e),c(t,r,e),c(t,a,e),l&&o(u),u=[d(n,"click",K),d(a,"click",Q)]},p:t,d(t){t&&l(n),t&&l(r),t&&l(a),o(u)}}}();return{c(){n=s("h1"),n.textContent=`${G}`,r=f(),u&&u.c(),a=i("")},m(t,e){c(t,n,e),c(t,r,e),u&&u.m(t,e),c(t,a,e)},p(t,[e]){u.p(t,e)},i:t,o:t,d(t){t&&l(n),t&&l(r),u&&u.d(t),t&&l(a)}}}let G="Hello word";function K(){}function Q(){}class U extends q{constructor(t){super(),P(this,t,null,D,a,{})}}function V(t){let e,n,r,a,i,h,y,g,$,b=function(t){let e,n,r,a,i,h,y,g,$,b,v,x;return{c(){e=s("div"),n=s("label"),r=s("h2"),r.textContent="Equipe",a=f(),i=s("input"),h=f(),y=s("h2"),y.textContent="Joueur",g=f(),$=s("input"),b=f(),v=s("button"),v.textContent="Joindre",p(i,"class","svelte-hhukx"),p($,"class","svelte-hhukx"),p(e,"id","team")},m(l,s,f){c(l,e,s),u(e,n),u(n,r),u(n,a),u(n,i),m(i,t[0].teamName),u(n,h),u(n,y),u(n,g),u(n,$),m($,t[0].playerName),u(e,b),u(e,v),f&&o(x),x=[d(i,"input",t[6]),d($,"input",t[7]),d(v,"click",t[1])]},p(t,e){1&e&&i.value!==t[0].teamName&&m(i,t[0].teamName),1&e&&$.value!==t[0].playerName&&m($,t[0].playerName)},d(t){t&&l(e),o(x)}}}(t);const v=new R({props:{players:t[0].players}});let x=function(t){let e;const n=new U({});return{c(){M(n.$$.fragment)},m(t,o){A(n,t,o),e=!0},i(t){e||(T(n.$$.fragment,t),e=!0)},o(t){B(n.$$.fragment,t),e=!1},d(t){J(n,t)}}}();return{c(){e=s("h1"),e.textContent="Insider",n=f(),b&&b.c(),r=f(),M(v.$$.fragment),a=f(),x&&x.c(),i=f(),h=s("div"),y=s("button"),y.textContent="Stop",p(e,"class","svelte-hhukx"),p(h,"id","stop")},m(o,l,s){c(o,e,l),c(o,n,l),b&&b.m(o,l),c(o,r,l),A(v,o,l),c(o,a,l),x&&x.m(o,l),c(o,i,l),c(o,h,l),u(h,y),g=!0,s&&$(),$=d(y,"click",t[2])},p(t,[e]){b.p(t,e);const n={};1&e&&(n.players=t[0].players),v.$set(n)},i(t){g||(T(v.$$.fragment,t),T(x),g=!0)},o(t){B(v.$$.fragment,t),B(x),g=!1},d(t){t&&l(e),t&&l(n),b&&b.d(t),t&&l(r),J(v,t),t&&l(a),x&&x.d(t),t&&l(i),t&&l(h),$()}}}const W="http://localhost:3000/game/";function X(t,e,n){let o={teamName:"",playerName:"",uuid:"",role:"",players:[],word:"",state:""};g(async()=>{setInterval(()=>{console.log("Refresh state");fetch(W+o.teamName+"/state?uuid="+o.uuid).then(t=>{if(t.ok)return t.json()}).then(t=>{console.log(t),n(0,o.players=[],o);for(const e in t.players)o.players.push(t.players[e]);console.log(o.players)}).catch(t=>{})},3e3)});const r=function(t,e){var n;return function(){var o=this,r=arguments,a=function(){n=null,t.apply(o,r)};clearTimeout(n),n=setTimeout(a,e)}}(t=>{genService("crypt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({secret:t.target.value})}).apply()},300);return[o,async function(){var t=document.getElementById("team"),e=t.getElementsByTagName("button");e[0].disabled=!0;const r=await fetch(W+o.teamName+"?playerName="+o.playerName,{}),a=await r.json();r.ok?(n(0,o.uuid=a.id,o),n(0,o.role=a.role,o),e[0].disabled=!1,t.style="display: none;"):e[0].disabled=!1},async function(){var t=team.getElementById("stop");t.disabled=!0;const e=await fetch(W+o.teamName+"?uuid="+o.uuid,{}),r=await e.json();e.ok?(n(0,o.uuid=r.id,o),n(0,o.role=r.role,o),t[0].disabled=!1,team.style="display: none;",getPlayers().apply()):t.disabled=!1},void 0,r,async function(){var t=document.getElementById("start");t.disabled=!0;const e=await fetch(W+o.teamName+"?uuid="+o.uuid,{}),r=await e.json();e.ok?(n(0,o.uuid=r.id,o),n(0,o.role=r.role,o),t[0].disabled=!1,team.style="display: none;"):t.disabled=!1},function(){o.teamName=this.value,n(0,o)},function(){o.playerName=this.value,n(0,o)}]}return new class extends q{constructor(t){super(),P(this,t,X,V,a,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
